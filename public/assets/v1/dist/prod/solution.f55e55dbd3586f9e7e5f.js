"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[823],{59836:function(t,n,e){e.r(n),e.d(n,{launch:function(){return h}});e(49228),e(58188),e(95342);var o=e(65311),i=e.n(o),r=e(92287),a=e(86563),s=i()(".assignment-comment"),m=i()("#update-comment-model-form"),c=i()("#add-comment"),l=i()("#comment-form-wrapper"),d=i()("#add-solution"),u=i()("#solution-form-wrapper"),f={initCommentForm:function(){c.on("click",(function(){l.removeClass("hidden"),r.Z.reflowEditor(l),i()(this).addClass("active"),u.length>0&&(u.addClass("hidden"),d.removeClass("active"))}))},initSolutionForm:function(){u.length>0&&d.on("click",(function(){u.removeClass("hidden"),r.Z.reflowEditor(u),i()(this).addClass("active"),l.addClass("hidden"),c.removeClass("active")}))},initCommentModal:function(){m.modal({show:!1}),m.on("shown.bs.modal",(function(t){var n=i()(t.target).find("textarea").get(0);r.Z.init(n),m.css("opacity","1")})),i()(".__edit",s).click((function(t){t.preventDefault();var n=i()(this);i().get(this.href,(function(t){m.css("opacity","1"),i()(".inner",m).html(t),m.modal("toggle")})).fail((function(t){if(403===t.status){(0,a.sc)("Доступ запрещён. Вероятно, время редактирования комментария истекло.","error"),n.remove()}}))})),m.on("submit","form",f.onSubmitCommentModalForm)},onSubmitCommentModalForm:function(t){t.preventDefault();var n=t.target;return i().ajax({url:n.action,type:"POST",data:i()(n).serialize()}).done((function(t){if(1===t.success){m.modal("hide");var n=s.filter((function(){return i()(this).data("id")==t.id})),e=i()(".ubertext",n);e.html(t.html),r.Z.render(e.get(0)),(0,a.sc)("Комментарий успешно отредактирован.")}else(0,a.sc)("Комментарий не был сохранён.","error")})).fail((function(){(0,a.sc)("Комментарий не был сохранён.","error")})),!1}};function h(){f.initCommentForm(),f.initSolutionForm(),f.initCommentModal()}}}]);